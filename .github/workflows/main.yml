name : Run main script

on:
  workflow_dispatch :

env :
  MAIL: ${{secrets.MAIL}}
  PASS: ${{secrets.PASS}}

jobs:
  run-python:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses : actions/checkout@v3
      
      - name: Setup Python
        uses : actions/setup-python@v4
        with:
          python-version : '3.11'

      - name: Configurar Git
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

      - name: Instalar dependencias y ejecutar script
        run: |
          pip install -r requirements.txt
          python main.py

      - name: Hacer commit y push de archivos generados
        run: |
          git add .
          git commit -m "ðŸš€ Auto-commit: Archivos generados por GitHub Actions" || echo "No hay cambios para commitear"
          git push origin main || echo "No hay cambios para pushear"
